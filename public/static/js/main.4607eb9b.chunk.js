(this["webpackJsonptoy-app"]=this["webpackJsonptoy-app"]||[]).push([[0],{136:function(e,t,n){e.exports=n(260)},258:function(e,t,n){e.exports=n.p+"static/media/main.6a6632f0.png"},259:function(e,t,n){},260:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),l=n(18),i=n(10),s=n(11),u=n(13),p=n(12),m=n(8),d=n(7),v=n.n(d),y=n(21),h=n(77),f=n.n(h).a.create({withCredentials:!0}),E=function(e,t){return console.log("data-",t),w(e,"GET",t)},g=function(e,t){return w(e,"POST",t)},b=function(e,t){return w(e,"PUT",t)},O=function(e,t){return w(e,"DELETE",t)};function w(e){return j.apply(this,arguments)}function j(){return(j=Object(y.a)(v.a.mark((function e(t){var n,a,r,o=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"get",a=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,f({url:"".concat("/api/").concat(t),method:n,data:a});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(a)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var C={add:function(e){return T.apply(this,arguments)},query:function(e){var t;e.name?t="?aboutToyId=".concat(e._id):e.username&&(t="?byUserId=".concat(e._id));return E("review".concat(t||""))},remove:function(e){return O("review/".concat(e))}};function T(){return(T=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("review",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return function(){var t=Object(y.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.query(e);case 3:a=t.sent,n({type:"SET_REVIEWS",reviews:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in loadReviews",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function R(e){return function(){var t=Object(y.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.add(e);case 3:t.sent,n({type:"REVIEW_ADD",review:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in addReview",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var k=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.loggedInUser;console.log(e);var t=e;this.props.loadReviews(t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement("h1",null," User Profile "),r.a.createElement("h3",null,"Personal Information:"),this.props.loggedInUser&&r.a.createElement("ul",null,r.a.createElement("li",null,"email: ","".concat(this.props.loggedInUser.email))),r.a.createElement("h4",null," reviews by this user: "),this.props.reviews&&r.a.createElement("ul",null,this.props.reviews.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("h3",null,e.txt),r.a.createElement("p",null,"About ",e.aboutToy.name),r.a.createElement("p",null,"By ",e.byUser.username),r.a.createElement("hr",null))}))))}}]),n}(a.Component),I={loadReviews:S},_=Object(m.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,reviews:e.reviewReducer.reviews}}),I)(k),A=n(20),U=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement("h1",null," Home "),r.a.createElement(A.b,{to:"/login"},"Login"),r.a.createElement(A.b,{to:"/user"},"User Profile"))}}]),n}(a.Component),x=Object(m.b)()(U),N=n(34),B=n(4),D={login:function(e){return P.apply(this,arguments)},logout:function(){return F.apply(this,arguments)},signup:function(e){return L.apply(this,arguments)},getUsers:function(){return E("user")},getById:function(e){return E("user/".concat(e))},remove:function(e){return O("user/".concat(e))},update:function(e){return b("user/".concat(e._id),e)}};function P(){return(P=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/login",t);case 2:return n=e.sent,e.abrupt("return",M(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/signup",t);case 2:return n=e.sent,e.abrupt("return",M(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function V(e){return function(t){return t({type:"ADD_TO_CART",item:e})}}function H(){return function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,D.getUsers();case 4:n=e.sent,t({type:"SET_USERS",users:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 11:return e.prev=11,t({type:"LOADING_DONE"}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}var Y=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:"",loginCred:{email:"",password:""},signupCred:{email:"",password:"",username:""}},e.loginHandleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{loginCred:Object(B.a)(Object(B.a)({},e.loginCred),{},Object(N.a)({},a,r))}}))},e.signupHandleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{signupCred:Object(B.a)(Object(B.a)({},e.signupCred),{},Object(N.a)({},a,r))}}))},e.doLogin=function(){var t=Object(y.a)(v.a.mark((function t(n){var a,r,o,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state.loginCred,r=a.email,o=a.password,r&&o){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:c={email:r,password:o},e.props.login(c),e.setState({loginCred:{email:"",password:""}}),e.props.history.push("/toy");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(y.a)(v.a.mark((function t(n){var a,r,o,c,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state.signupCred,r=a.email,o=a.password,c=a.username,r&&o&&c){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required!"}));case 4:l={email:r,password:o,username:c},e.props.signup(l),e.setState({signupCred:{email:"",password:"",username:""}}),e.props.history.push("/toy");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeUser=function(t){e.props.removeUser(t)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=r.a.createElement("form",{onSubmit:this.doSignup},r.a.createElement("input",{type:"text",name:"email",value:this.state.signupCred.email,onChange:this.signupHandleChange,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("input",{name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username"}),r.a.createElement("br",null),r.a.createElement("button",null,"Signup")),n=r.a.createElement("form",{onSubmit:this.doLogin},r.a.createElement("input",{type:"text",name:"email",value:this.state.loginCred.email,onChange:this.loginHandleChange,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",null,"Login")),a=this.props.loggedInUser;return r.a.createElement("div",{className:"test"},r.a.createElement("h4",{className:"clr5"},"This is a testing page for working with the Production Ready Server"),r.a.createElement("h2",null,this.state.msg),a&&r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome: ",a.username," "),r.a.createElement("button",{onClick:this.props.logout},"Logout")),!a&&n,!a&&t,r.a.createElement("hr",null),r.a.createElement("button",{onClick:this.props.loadUsers},"Get All Users"),this.props.isLoading&&"Loading...",this.props.users&&r.a.createElement("ul",null,this.props.users.map((function(t){return r.a.createElement("li",{key:t._id},r.a.createElement("pre",null,JSON.stringify(t,null,2)),r.a.createElement("button",{onClick:function(){e.removeUser(t._id)}},"Remove ",t.username))}))))}}]),n}(a.Component),W={login:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.login(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return console.log("inside"),function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},signup:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.signup(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removeUser:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.remove(e);case 3:n({type:"USER_REMOVE",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:H},q=Object(m.b)((function(e){return{users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser,isLoading:e.systemReducer.isLoading}}),W)(Y),G=n(128);function J(e){var t=e.children,n=Object(G.a)(e,["children"]);return r.a.createElement("button",n,t)}var $={query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;return t.set("name",e.name||""),t.set("minPrice",e.minPrice||""),t.set("maxPrice",e.maxPrice||""),t.set("category",e.category||""),t.set("inStock",e.inStock||""),E("toy?".concat(t))},getById:function(e){return E("toy/".concat(e),e)},remove:function(e){return O("toy/".concat(e))},save:function(e){return console.log("toy",e),e._id?b("toy/".concat(e._id),e):g("toy",e)},getEmpty:function(){return{name:"",price:0,category:"",inStock:!1}},getRandomColor:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}};function X(e){return function(t){$.query(e).then((function(e){t({type:"SET_TOYS",toys:e})}))}}var K=n(288),z=n(117),Q=n.n(z),Z=n(116),ee=n.n(Z),te=n(118),ne=n.n(te),ae=n(119),re=n.n(ae);function oe(e){var t=e.toy,n=e.onAddToCart,a=e.onRemove;return r.a.createElement("div",{className:"card-toy card flex column"},r.a.createElement("ul",{className:"toy-info"},r.a.createElement("div",{className:"body-card tac"},r.a.createElement("li",null,"Price: ".concat(t.price)),r.a.createElement("li",null,"Category: ".concat(t.category)),r.a.createElement("li",null,"Available: ".concat(t.inStock?"YES!":"NOT AVAILABLE"))),r.a.createElement("div",null,r.a.createElement(K.a,{"aria-label":"add to shopping cart",onClick:function(){return n(t)}},r.a.createElement(ee.a,{className:"clr1"})),r.a.createElement(K.a,{"aria-label":"delete",onClick:function(){return a(t._id)}},r.a.createElement(Q.a,{className:"clr1"})),r.a.createElement(A.b,{to:"/toy/edit/".concat(t._id)},r.a.createElement(K.a,{"aria-label":"edit"},r.a.createElement(ne.a,{className:"clr1"}))),r.a.createElement(A.b,{to:"/toy/".concat(t._id)},r.a.createElement(K.a,{"aria-label":"details"},r.a.createElement(re.a,{className:"clr1"}))))))}function ce(e){var t=e.header,n=e.body;e.footer,e.img;return r.a.createElement("div",{className:"card-container"},r.a.createElement("h3",{className:"card-title tac"},t),r.a.createElement("div",null,n))}function le(e){var t=e.toys,n=e.onRemove;return r.a.createElement("div",{className:"card-grid"},t.map((function(e){return r.a.createElement(ce,{key:e._id,header:e.name,body:r.a.createElement(oe,{toy:e,onRemove:n}),footer:"The footer"})})))}var ie=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",minPrice:"",maxPrice:"",inStock:"",category:""},e.handleChange=function(t){var n,a=t.target;console.log("inside!"),n=a.name?a.name:a.id;var r="number"===a.type?+a.value:a.value;e.setState(Object(N.a)({},n,r),(function(){return e.props.onSetFilter(e.state)}))},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("form",{className:"fs16 filter"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:""},"By Name"),r.a.createElement("input",{name:"name",autoComplete:"off",value:this.state.name,onChange:this.handleChange,type:"text"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:""},"Min-Price"),r.a.createElement("input",{type:"number",name:"minPrice",onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:""},"Max-Price"),r.a.createElement("input",{type:"number",name:"maxPrice",onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"inStock"},"Availabile"),r.a.createElement("select",{id:"inStock",onChange:this.handleChange},r.a.createElement("option",{value:"all"},"All"),r.a.createElement("option",{value:"yes"},"Yes"),r.a.createElement("option",{value:"no"},"No"))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{id:"category",onChange:this.handleChange},r.a.createElement("option",{value:"all"},"All"),r.a.createElement("option",{value:"Adult"},"Adult"),r.a.createElement("option",{value:"Funny"},"Funny"),r.a.createElement("option",{value:"Educational"},"Educational"))))}}]),n}(a.Component),se=n(120),ue=n.n(se),pe=n(121),me=n.n(pe),de=n(122),ve=n.n(de),ye=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onAddToCart=function(t){e.props.addToCart(t)},e.onSetFilter=function(t){e.props.updateFilter(t)},e.onRemove=function(t){e.props.removeToy(t)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys(this.props.filterBy)}},{key:"componentDidUpdate",value:function(e){e.filterBy&&(e.filterBy.name===this.props.filterBy.name&&e.filterBy.maxPrice===this.props.filterBy.maxPrice&&e.filterBy.minPrice===this.props.filterBy.minPrice&&e.filterBy.inStock===this.props.filterBy.inStock&&e.filterBy.category===this.props.filterBy.category||this.props.loadToys(this.props.filterBy))}},{key:"render",value:function(){var e=this.props.toys;return e?r.a.createElement("div",{className:"toy-app app main-container app-container"},r.a.createElement("div",null,r.a.createElement("h4",{className:"clr1"},"sort Format"),r.a.createElement(ie,{onSetFilter:this.onSetFilter}),r.a.createElement(A.b,{to:"/toy/bar/"},r.a.createElement(K.a,{"aria-label":"edit"},r.a.createElement(ue.a,null))),r.a.createElement(A.b,{to:"/toy/edit"},r.a.createElement(K.a,{"aria-label":"edit"},r.a.createElement(me.a,null))),r.a.createElement(A.b,{to:"/review"},r.a.createElement(K.a,{"aria-label":"edit"},r.a.createElement(ve.a,null)))),r.a.createElement(le,{toys:e,onAddToCart:this.onAddToCart,onRemove:this.onRemove})):r.a.createElement("div",null,"Loading....")}}]),n}(a.Component),he={loadToys:X,addToCart:V,changeToysFilter:function(e){return console.log("action-",e),function(t){$.query(e).then((function(e){t({type:"SET_TOYS",toys:e})}))}},removeToy:function(e){return function(t){$.remove(e).then((function(){t({type:"REMOVE_TOY",_id:e})}))}},updateFilter:function(e){return console.log("filter in action-",e),function(t){t({type:"SET_FILTER",filterBy:e})}}},fe=Object(m.b)((function(e){return{toys:e.toyReducer.toys,filterBy:e.filterReducer.filterBy}}),he)(ye),Ee=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={reviewToEdit:{txt:"",aboutToyId:"",byUserId:""}},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{reviewToEdit:Object(B.a)(Object(B.a)({},e.reviewToEdit),{},Object(N.a)({},a,r))}}))},e.addReview=function(t){t.preventDefault(),e.props.addReview(e.state.reviewToEdit),e.setState({reviewToEdit:{txt:"",aboutToyId:""}})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.loadUsers();var t=this.props.match.params.toyId;$.getById(t).then((function(t){e.props.loadReviews(t);var n=t._id,a=e.props.loggedInUser._id;e.setState({reviewToEdit:Object(B.a)(Object(B.a)({},e.state.reviewToEdit),{},{byUserId:a,aboutToyId:n})})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement("h1",null," Reviews- "),this.props.reviews&&r.a.createElement("ul",null,this.props.reviews.map((function(e){return console.log(e),r.a.createElement("li",{key:e._id},r.a.createElement("h3",null,e.txt),r.a.createElement("p",null," By ",e.byUser.username," "),r.a.createElement("hr",null))}))))}}]),n}(a.Component),ge={loadReviews:S,addReview:R,loadUsers:H},be=Object(m.b)((function(e){return{toys:e.toyReducer.toys,reviews:e.reviewReducer.reviews,users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser}}),ge)(Ee),Oe=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_id:"",toy:[]},e.componentDidMount=function(){var t=e.props.match.params.toyId;$.getById(t).then((function(n){e.setState({_id:t,toy:n})}))},e.onAddToCart=function(t){e.props.addToCart(t)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t._id,a=t.toy;return n?r.a.createElement("div",{className:"main-header"},r.a.createElement("h1",null,"ToyDetails :) "),r.a.createElement("h2",null,"Name: ",a.name),r.a.createElement("h2",null,"Price: $",a.price),r.a.createElement("h3",null,"Availability:",a.inStock?r.a.createElement("span",{className:"clr2"}," 'YES!'"):r.a.createElement("span",{className:"clr1"}," NOT AVAILABLE!")),r.a.createElement("h3",null,"Creation-Time:",a.createdAt),r.a.createElement("h3",null,"Description:"),r.a.createElement("pre",{className:"ch50"},"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Officiis mollitia et pariatur nulla excepturi eveniet dolore obcaecati sint perspiciatis, iure quae eaque velit culpa, soluta reiciendis? Nostrum, iure. Hic, modi."),r.a.createElement(J,{onClick:function(){return e.onAddToCart(a)},style:{backgroundColor:"yellow"}},"ADD TO CART"),r.a.createElement(J,{onClick:function(){return e.props.history.push("/toy")},style:{backgroundColor:"yellow"}},"BACK TO STORE"),r.a.createElement(A.b,{to:"/toy/review/".concat(n)},"Reviews")):r.a.createElement("h1",null,"Loading...")}}]),n}(a.Component),we={loadToys:X,addToCart:V},je=Object(m.b)((function(e){return{toys:e.toyReducer.toys}}),we)(Oe),Ce=n(44),Te=n(293),Se=n(292),Re=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={toy:""},e.onSave=function(t,n){e.props.saveToy(t),e.props.history.push("/toy")},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.toyId;if(console.log("toyId-",t),t)$.getById(t).then((function(t){console.log("toy",t),e.setState({toy:t})}));else{var n=$.getEmpty();this.setState({toy:n})}}},{key:"render",value:function(){var e=this,t=this.state.toy,n=this.state.loggedInUser;console.log("loged-",n);var a=function(e){return r.a.createElement(Te.a,Object.assign({},e,{label:"name",type:"text",autoComplete:"current-name"}))},o=function(e){return r.a.createElement(Te.a,Object.assign({},e,{label:"category",type:"text",autoComplete:"current-name"}))},c=function(e){return r.a.createElement(Te.a,Object.assign({},e,{label:"Number",type:"number",InputLabelProps:{shrink:!0}}))};if(!t)return r.a.createElement("h1",null,"Loading...");var l=null,i=t.name,s=t.price,u=t.category;t._id&&(l=t._id);return console.log("propeeties-",i,s,u,!1),r.a.createElement("div",null,r.a.createElement(Ce.c,{onSubmit:this.onSave,initialValues:{_id:l,name:i,price:s,category:u,inStock:!1}},(function(t){var n=t.values;return r.a.createElement(Ce.b,{className:"filter"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"txt"},"Toy name"),r.a.createElement(Ce.a,{type:"text",name:"name",as:a})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"txt"}," Price "),r.a.createElement(Ce.a,{type:"number",name:"price",as:c})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"txt"}," Category "),r.a.createElement(Ce.a,{type:"text",name:"category",as:o})),r.a.createElement("div",null,r.a.createElement(Ce.a,{type:"checkbox",name:"inStock",checked:n.inStock}),r.a.createElement(Se.a,{type:"submit"},"Save"),r.a.createElement(Se.a,{onClick:function(){return e.props.history.push("/toy")}},"Back to store")))})))}}]),n}(a.Component),ke={saveToy:function(e){return function(t){$.save(e).then((function(e){console.log(e),t({type:"SAVE_TOY",savedToy:e})}))}}},Ie=Object(m.b)((function(e){return{toys:e.toyReducer.toys,loggedInUser:e.userReducer.loggedInUser}}),ke)(Re),_e=n(64),Ae=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getToysData=function(){return e.props.toys.reduce((function(e,t){return e[t.category]||(e[t.category]=0),e[t.category]++,e}),{})},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.getToysData();if(!Object.keys(e).length)return r.a.createElement("div",null,"loading");for(var t=Object.keys(e).map((function(e){return[e]})),n=[],a=[],o=0;o<t.length;o++)n.push($.getRandomColor()),a.push($.getRandomColor());var c={labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:[].concat(n),hoverBackgroundColor:[].concat(a)}]};return r.a.createElement("div",null,r.a.createElement(_e.Pie,{data:c}))}}]),n}(a.Component),Ue=Object(m.b)((function(e){return{toys:e.toyReducer.toys}}))(Ae),xe=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getToysCategoryData=function(){return e.props.toys.reduce((function(e,t){return e[t.category]||(e[t.category]=0),e[t.category]+=t.price,e}),{})},e.getToysData=function(){return e.props.toys.reduce((function(e,t){return e[t.category]||(e[t.category]=0),e[t.category]++,e}),{})},e}return Object(s.a)(n,[{key:"render",value:function(){this.props.toys;var e=this.getToysData(),t=this.getToysCategoryData(),n=Object.values(t),a=Object.values(e),o=[];if(n.forEach((function(e,t){return o.push(e/a[t])})),!Object.keys(e).length)return r.a.createElement("div",null,"loading");var c={labels:Object.keys(e),datasets:[{label:"CATEGORY WITH PRICES",backgroundColor:"rgba(295,149,88,0.2)",borderColor:"rgba(255,99,14,1)",borderWidth:1,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"rgba(255,99,132,1)",data:o}]};return r.a.createElement("div",null,r.a.createElement(_e.Bar,{data:c,options:{maintainAspectRatio:!1}}))}}]),n}(a.Component),Ne=Object(m.b)((function(e){return{toys:e.toyReducer.toys}}))(xe),Be=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys(this.props.filterBy)}},{key:"render",value:function(){var e=this.props.toys;return console.log(e),r.a.createElement("div",null,r.a.createElement(Ue,{toys:e}),r.a.createElement(Ne,null))}}]),n}(a.Component),De={loadToys:X},Pe=Object(m.b)((function(e){return{toys:e.toyReducer.toys}}),De)(Be),Le=n(125),Fe=n.n(Le),Me=n(126),Ve=n.n(Me);var He=Object(m.b)((function(e){return{user:e.userReducer.loggedinUser,cartItems:e.userReducer.cartItems}}),{})(Object(l.f)((function(e){var t=n(258);return r.a.createElement("header",{className:"main-header"},r.a.createElement("div",{className:"nav"},r.a.createElement("h3",null,"User: "),r.a.createElement("h3",null,"Balance: $5000 "),r.a.createElement("h3",null,"Items in your Cart: 100 "),r.a.createElement("h3",null,"Total price: "),r.a.createElement("nav",{className:"nav-btn"},r.a.createElement(A.c,{to:"/"},r.a.createElement(K.a,{"aria-label":"home"},r.a.createElement(Fe.a,null))),r.a.createElement(A.c,{to:"/toy"},r.a.createElement(K.a,{"aria-label":"toy-stor"},r.a.createElement(Ve.a,null))))),r.a.createElement("img",{className:"logo",src:t,alt:""}),r.a.createElement("h1",null,"My Shop"))}))),Ye=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,"about")}}]),n}(a.Component),We=Object(m.b)((function(e){return{toys:e.toyReducer.toys}}),{})(Ye),qe=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).addReview=function(t){t.preventDefault(),e.props.addReview(e.state.reviewToEdit),e.setState({reviewToEdit:{txt:"",aboutUserId:""}})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.loadReviews()}},{key:"render",value:function(){return r.a.createElement("div",{className:"home"},this.props.reviews&&r.a.createElement("ul",null,this.props.reviews.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("h3",null,e.txt),r.a.createElement("p",null,"About ",e.aboutToy.name),r.a.createElement("p",null,"By ",e.byUser.username),r.a.createElement("hr",null))}))))}}]),n}(a.Component),Ge={loadReviews:S,loadUsers:H,addReview:R},Je=Object(m.b)((function(e){return{toys:e.toyReducer.toys,reviews:e.reviewReducer.reviews,users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser}}),Ge)(qe);var $e=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(He,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{component:Ie,path:"/toy/edit/:toyId?"}),r.a.createElement(l.a,{component:be,path:"/toy/review/:toyId"}),r.a.createElement(l.a,{component:je,path:"/toy/:toyId"}),r.a.createElement(l.a,{component:We,path:"/about/:userId?"}),r.a.createElement(l.a,{component:Pe,path:"/toy/bar"}),r.a.createElement(l.a,{component:Je,path:"/review"}),r.a.createElement(l.a,{component:_,path:"/user"}),r.a.createElement(l.a,{component:fe,path:"/toy"}),r.a.createElement(l.a,{component:q,path:"/login"}),r.a.createElement(l.a,{component:x,path:"/"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Xe=n(43),Ke=n(127),ze={toys:[]};var Qe=n(66),Ze=null;sessionStorage.user&&(Ze=JSON.parse(sessionStorage.user));var et={users:[],loggedInUser:Ze,cartItems:[]};var tt={filterBy:{}};var nt={reviews:[],selectedReview:null};var at={isLoading:!1};var rt=Object(Xe.c)({toyReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOYS":return Object(B.a)(Object(B.a)({},e),{},{toys:t.toys});case"REMOVE_TOY":return Object(B.a)(Object(B.a)({},e),{},{toys:e.toys.filter((function(e){return e._id!==t._id}))});case"SAVE_TOY":return Object(B.a)(Object(B.a)({},e),{},{toys:e.toys.map((function(e){return e._id===t.savedToy._id?t.savedToy:e}))});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(B.a)(Object(B.a)({},e),{},{loggedInUser:t.user});case"SET_USERS":return Object(B.a)(Object(B.a)({},e),{},{users:t.users});case"USER_REMOVE":return Object(B.a)(Object(B.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"ADD_TO_CART":return Object(B.a)(Object(B.a)({},e),{},{cartItems:[].concat(Object(Qe.a)(e.cartItems),[t.toy])});case"SPEND_BALANCE":return Object(B.a)(Object(B.a)({},e),{},{loggedinUser:Object(B.a)(Object(B.a)({},e.loggedinUser),{},{balance:e.loggedinUser.balance-t.spendAmount})});case"CLEAR_CART":return Object(B.a)(Object(B.a)({},e),{},{cartItems:[]});default:return e}},filterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return Object(B.a)(Object(B.a)({},e),{},{filterBy:t.filterBy});default:return e}},reviewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_REVIEWS":return console.log("insid",t),Object(B.a)(Object(B.a)({},e),{},{reviews:t.reviews});case"REVIEW_ADD":return Object(B.a)(Object(B.a)({},e),{},{reviews:[].concat(Object(Qe.a)(e.reviews),[t.review])});case"REVIEW_UPDATE":return Object(B.a)(Object(B.a)({},e),{},{reviews:e.reviews.map((function(e){return e._id===t.review._id?t.review:e}))});default:return e}},systemReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(B.a)(Object(B.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(B.a)(Object(B.a)({},e),{},{isLoading:!1});default:return e}}}),ot=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Xe.d,ct=Object(Xe.e)(rt,ot(Object(Xe.a)(Ke.a)));n(259);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:ct},r.a.createElement(A.a,null,r.a.createElement($e,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.4607eb9b.chunk.js.map